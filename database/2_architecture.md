# ANSI/SPARC 아키텍쳐와 데이터 독립성

## ANSI/SPARC 아키텍쳐

- 물리적, 개념적, 외부 단계 3단계로 이루어짐
  - 외부 단계(external level): 각 사용자의 뷰
  - 개념 단계(conceptual level): 사용자 공동체의 뷰
  - 내부 단계(internal level): 물리적 또는 저장 뷰

![스크린샷 2021-09-06 오후 8 17 31](https://user-images.githubusercontent.com/70752848/132209356-97870d54-95fc-42f0-a8c5-b08b79a7b2bf.png)

### 외부 단계

- DB의 각 사용자가 갖는 뷰
- 여러 부류의 사용자를 위해 동일한 개념 단계로부터 다수의 서로 다른 뷰가 제공될 수 있음
- 일반적으로, 최종 사용자와 응용 프로그래머들은 DB의 일부분에만 관심

### 개념 단계

- 조직체의 정보 모델, 물리적 구현은 고려하지 않으며 조직 전체에 관한 스키마를 포함
- DB에 어떤 데이터가 저장되어 있으며, 어떤 관계성을 가지는지, 어떤 무결성 제약조건들이 명시되어 있는가를 기술
- DB에 대한 사용자 공동체의 뷰를 나타냄
- DB마다 오직 한 개의 개념 스키마가 존재

### 내부 단계

- 실제 물리적 데이터 구조에 대한 스키마
- 어떤 데이터가 어떻게 저장되어 있는가를 기술
- 인덱스, 해싱과 같은 접근 경로, 데이터 압축 등을 기술
- 개념 스키마에는 영향을 미치지 않으며 성능 향상을 위해 내부 스키마를 변경하는 것이 바람직
- 내부 단계 아래에는 물리적 단계
- 물리적 단계는 DBMS 지시에 따라 운영체제가 관리

![스크린샷 2021-09-06 오후 8 24 53](https://user-images.githubusercontent.com/70752848/132210249-36a6f38a-0c0a-4191-beb5-3d62807540a6.png)

## 스키마 간의 사상

- DBMS는 세 가지 유형의 스키마 간의 사상(매핑)을 책임짐
- 외부/개념 사상(external/conceptual mapping)
  - 외부 단계의 뷰를 사용해서 입력된 사용자의 질의 개념 단계의 스키마를 사용한 질의로 변환
- 개념/내부 사상(conceptual/internal mapping)
  - 이를 다시 내부 단계의 스키마로 변환하여 디스크의 DB를 접근

### 외부 스키마 EXAMPLE

![스크린샷 2021-09-06 오후 8 29 10](https://user-images.githubusercontent.com/70752848/132210741-93f396eb-6dcc-442d-ae57-5b7dc123375b.png)

### 내부 스키마 EXAMPLE

![스크린샷 2021-09-06 오후 8 31 01](https://user-images.githubusercontent.com/70752848/132210965-8dece51c-80c9-4919-a304-b385cc0a95bb.png)

## 데이터 독립성

- 상위 단계의 스키마 정의에 영향을 주지 않으면서 어떤 단계의 스키마 정의를 변경할 수 있음을 의미

  - 논리적 데이터 독립성
    - 개념 스키마의 변화로부터 외부 스키마가 영향을 받지 않음을 의미
    - 기존의 외부 스키마에 영향을 미치지 않고, 응용 프로그램을 다시 작성할 필요 없이 개념 스키마에 대한 변화가 가능해야 함
  - 물리적 데이터 독립성

    - 내부 스키마의 변화가 개념적 스키마에 영향을 미치지 않으며, 따라서 외부 스키마(또는 응용 프로그램)에도 영향을 미치지 않음을 의미
    - 내부 스키마 변화의 예: 파일의 저장 구조를 바꾸거나 인덱스를 생성 및 삭제

    ![스크린샷 2021-09-06 오후 8 38 37](https://user-images.githubusercontent.com/70752848/132211838-efc50598-d351-448b-a268-88b4f5f805cf.png)
